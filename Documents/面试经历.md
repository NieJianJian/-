## 美团

* 内部类的分类和使用场景

  * 为什么要有内部类，为了解决什么问题
  * 什么情况下使用内部类
  * 会带来哪些问题

* handler

  * 实现原理

  * 如何导致内存泄露

    [Handler内存泄露及解决方案](https://www.jianshu.com/p/804e774d9f76)

  * postdelay

* 内存泄露

  * 项目中导致内存泄露的点

* 线程

  * 为什么要有线程
  * 线程是不是越多越好
  * 线程之间的协作
    * 错误回答：使用标志位控制执行和暂停。（浪费资源）
  * 并发三大特性
    * float变量的操作是原子操作吗？

* synchronized和Lock的区别

* 静态单例

  * 注意volatile
  * 注意return

* service的启动方式和区别

* 如何实现AIDL

* 源码：okhttp和retrofit

***

***

***

## 58同城

* 面向接口和面向对象的区别
  * 单继承、多接口。接口可以多继承吗？
* HashMap
  * 负载因子
  * 扩容机制
  * 是否可以存入null，怎么存，存到哪里？
  * 头插法还是尾插法？
* HashTable
  * 和hashmap区别
  * 是否可以存null
* ConcurrentHashMap
  * 讲讲分段锁
* synchronized和volatile的区别
* ReentrantLock
  * 如何使用
  * 和sychronized的区别。
  * 会造成死锁吗
* Thread
  * 线程是什么
  * 死锁的条件
* ThreadLocal实现原理，和当前线程的关系
* JVM
  * 栈帧里面有什么
* JC ROOT
* 垃圾回收有哪几种
  * 对象可以直接进入老年代吗
* Handler
  - 100ms的消息发送，过了40ms，再发送一个延迟10ms的消息，这个消息插入到哪里。
* View绘制原理
* View事件分发
  * LinearLayout嵌套RelativeLayout，再嵌套TextView。点击TextView，一直滑动到LinearLayout外部，整个事件的处理是怎么样的。
  * down事件在哪个方法中。
* View滑动冲突
* 动画
  * 帧动画、补间动画、属性动画的概念和区别。是否View移动，点击原来的位置是否还能触发事件。
* RecyclerView和ListView的区别
* 内存优化
  * View优化，是不是层级越多，就一定会卡顿？为什么卡顿，为什么是16ms？
  * Bitmap的使用？（裁剪、缩略图）
* Glide的原理，缓存机制，生命周期。
* 设计模式的六大原则，了解什么设计模式。
* 代理模式是什么，动态代理怎么用。

***

***

***

### 硬核聚视

* 阅读过什么源码
* 手写责任链模式
* 四大组件
* Activity的启动模式
  * singleInstance为什么要起一个新栈，和旧栈之间的关系，多个栈的意义是什么
* Java多线程
  * AsyncTask必须重写的方法
* volatile
  * 如何保证可见性的，谁负责立即刷新到主内存的。
  * 什么是重排序，为什么要重排序，什么情况下会重排序
  * 如何实现禁止重排序的，谁来实现重排序的。
* 手写'单例模式
  * 变量为什么加volatile

* sychronized和Lock
  * 什么是可重入锁
  * 为什么要可重入
  * 底层如何实现加锁
* HTTP断点续传

***

### 硬核聚视二面

* 为什么选择Android行业
* 为什么要离职
* 有自己的目标吗，自己想学哪方面的东西。
* 项目的应用架构，当时是怎么安排app的架构。
  * Builder模式的优点，为什么不用构造方法传入或者set设置，为什么要用Builder模式。
* HttpUrlConnection写网络请求的时候需要处理哪些异常。
* finally之前调用return，还会不会执行finally。
* HTTPS请求的认证过程。客户端需要做什么事儿。
* HTTP 302是什么意思，重定向如何实现，如何知道重定向到哪里。
* int和Integer类型的区别。用的时候有什么需要注意的。
* minSdkVersion、compileSdkVersion、targetSdkVersion
* IntentService什么时候使用。代码里有用到过吗？
* fbreader开源库的选型，为什么选这个，出于什么考虑。接入过程中有没有遇到什么问题。
* 做过什么优化，优化后达到什么结果。
  * 启动慢，需要优化，任务分配给你，你会怎么做，做些什么。如何评估你的优化结果。
* 你应用在做过的比较好的功能，或者有技术难点功能。
* 给你一个任务，启动优化任务，看你怎么去做。缺少一个开始做规划的过程。比如项目从0-1的框架是如何搭建的，这个地方缺少一个大的方向上把控，清晰的划分为哪些东西。比如启动优化任务，第一我要查问题出在哪，要确定优化到什么地步，如何检测我们优化的结果。网络层的东西欠缺，HTTPS这个应该算是比较基础的知识点，应该扎实的掌握该知识。
* 后期的学习方向，技术的发展方向。有倾向于哪个方向发展吗？

***

***

***

### 掌心互联

* MVP
* 视频用的什么实现方式，surfaceView和mediaPlayer如何实现视频播放。
* SurfaceView和TextureView的区别
* Android启动模式
* 插件化，项目中有没有用到
* 热更新
* 阅读app翻页如何实现
* 蓝悦app渲染如何确定一页读取哪些内容，多少内容
* TextView的设置高度比实际宽度大，如何处理的。
* 有没有做过海外版的app，google服务，支付什么的。
* 公司情况：20多人。3个andorid，4个ios，2个后台，一个测试，2个UI。一个技术专家，一个技术总监。13薪，440餐补。项目奖金。公司模式是半个月一个月做一款app，尝试爆款。大小周，常加班。
* 人事问：为什么离职，工作中有没有特别有成就感的事儿。

***

***

***

### 小熊博望一面

* react native，flutter有了解吗

* 自定义View着重哪几个步骤，有什么需要注意的点。

  * wrap_content需要在onDraw中处理，否则和match_parent一直。
  * onDraw中写代码有什么需要注意的（我回答的是16ms，优化，尽量少创建对象）
  * 有涉及到自定义View的工作吗。
  * 继承于ViewGorup，比如继承于FrameLayout，在onDraw中绘制东西，有什么需要注意的吗？（没回答出来）
  * 那你知道View的ViewGroup的绘制有什么区别。（我回答的是ViewGroup需要不断的测量子View，View只需要测量自身，ps，有点跑题）
  * 比如说继承一个FrameLayout，在它的onDraw方法中打印一行log，这样log会打印出来吗？（没回答出来）
  * ViewGroup有一个方法叫setWillNotDraw，你回去可以看看，它会控制自己要不要绘制这个东西。（面试官的回答，这才是面试官问ViewGropu绘制的点）

* 事件分发流程，从哪接收到，怎么决定如何给谁处理。

* Java的锁熟悉吗。（回答sychronized和ReentrantLock）

  * 这两个锁有什么区别（回答自动加锁和手动加解锁）
  * synchronized中有一行代码崩溃和Lock中有一行代码崩溃，导致的结果有什么区别吗？（回答的是unlock应该在finally中）
  * 为什么确保unlock一定要执行。（回答一一对应，否则会造成死锁）
  * 那为什么synchronized不需要处理呢？（回答是系统底层，monitor）

* 手写单例模式

  * 为什么加volatile
  * 两次判空是什么意思，为什么要两次判空。

* Java接口和抽象类的区别

* 接口可以被继承吗

* 性能优化从哪几个点找问题，解决问题。

* LinearLayout中嵌套了LinearLayout会有什么坑吗？（我反问，为什么不能用merge合并）

  * 如果LinearLayout中又写了一个LinearLayout，同时两个都写layout_weight，可能会造成什么问题吗？
  * LinearLayout的测量流程是什么样的，碰到layout_weight测量流程会变成什么样子。

* 为什么是内存泄露，比较容易出现的内存泄露有哪些。（回答static，内部类）

* 内部类为什么会导致内存泄露

* 屏幕适配，权限申请。屏幕适配有什么心得吗？如何确保，或者说用什么手段确保效果。

* 竖屏和横屏如何适配。横屏的布局和竖屏的布局不一样，如何实现。

* 什么情况会造成ANR？

* Service代码跑在主线程还是子线程？

* 进程如何监测到是否ANR？

* Handler机制？

* 如何在每一条消息完成去打印一条log，如何实现？

* File类熟悉吗？File是树状结构，如何遍历？

  ```java
  public class Tree{
      List<Tree> children;
  }
  ```

  （我用递归实现的），然后面试官问，如果用递归的话，层级特别深，会有什么问题？

  （我回答栈溢出），然后面试官问，还有什么好的方法可以实现？（我回答不用递归就是迭代）

  （BFS采用Queue，DFS采用Stack）

***

### 小熊博望二面

* 你负责哪个模块，你做的工作是什么。介绍最近的项目就行。

* 阅读器的实现是自己写的，还是开源的项目修改。txt文本阅读实现的方案和流程，设计到的技术点。

  * （我回答到文件加密）文本是整体加密还是内容加密？
  * 如果文本特别大呢？（我回答txt文本不会很大）为什么不会很大呢？你们做过边缘测试吗？你有没有考虑边界条件？你们需求有没有明确要求文本多大？你处理最大的文本多大？
  * （我回答不会每次全部读取，只读取4096），4096有几个字？你只读部分，不可能解密的啊？
  * （我回答解密就是去文本全部解密，读取才是一部分的去读。PS：这一块没回答好）
  * 耗时你们考虑了吗？什么加密方式。（我回答md5加密）。md5是可逆的吗？
  * （解密放在data目录下）会不会有什么策略？每次加载都放进去？有100本怎么办？
  * （读取字节，用Canvas一行一行画）文字是TextView？排版怎么解决？（我回答的排版是一行多少个字怎么控制）面试官问的排版是中英文混合如何处理？两遍无法对齐，如何解决？

* 最近做的项目中所用到的模块和技术的难点？技术方案的选择。

* 公共代码库的开发和维护，你的屏幕自适配是怎么做的呢？

* 如果说让你在手机上做适配，你怎么做呢？你知道今日头条的自适配吗？（我回答我在它的基础上做了修改）。你做了哪些修改？我其实想听的是，宽度有一个比例，高度有一个比例，进行适配的。

* 你说下你权限申请的技术思路，技术方案，怎么考虑的？遇到的问题，和怎么解决的。你的框架怎么搭建的？用什么设计模式了吗？怎么让别人用起来更加方便。

* 公共组件开发是指哪些东西？

* 算法题：n级台阶，每次走1步或者2步，请问有多少种方案？（PS：动态规划）

  * 动态规划解决问题的本质是什么？

* 算法题：有序数组，如何变成锯齿数组（锯齿数组：偶数位比两边的奇数位都要大），元素重复不考虑。

  我的解题方案：将偶数位和它后面的那一位进行位置调换。

* 增量更新是指热更新吗？用到的关键技术有哪些？如何对保的字节位进行比较的？

  * 有Bug，dex如何和线上进行区分的，如何替换的。如何合并，字节位如何判断。（面试官想问的比较字节位的过程）

* 有做过主题切换的功能？（我会带没做过）你知道换肤是如何实现的吗？

  * Resources如何创建的，皮肤包是什么类型的？是安装包还是apk的，你都没说前提。

* 你知道LayoutFactory？LayoutInflater.Factory的夜间模式。

* 你平时如何提升自己的技术？

* 匿名内部类为什么final修饰？值拷贝，不是变量引用，涉及到JVM内存方面的知识。

* 线程池几个关键的参数是什么，分别代表什么意思。

* 线程中断如何实现。

***

***

***

### 白龙马云行科技一面

* 封装、继承、多态

* 基本数据类型和包装数据类型的区别

* 有没有C++经验

* C++是多继承，为什么Java是单继承

* 抽象类和接口的区别？抽象类和接口可以定义final修饰的方法吗？常量能用final修饰吗？为什么？

* String类为什么是final的。

  * ```java
    String a = "helloworld";   
    String b = "hello" + "world"；
    String c = new String("helloworld")；
    ```

    * a是否等于b
    * a是否等于c
    * `String c = new String("helloworld")`产生几个对象。

* HashMap的实现原理？如何扩容？HashMap是线程安全的吗？它哪块实现导致它不是线程安全的？

* 线程与进程的区别。

* Java线程同步方式。

* Android线程间交互方式。

* Handler的原理

* 子线程new一个handler和主线程new一个handler有什么不一样

* 系统如何知道looper是在主线程还是子线程，是如何判断的。

* 进程间通讯的方式

  * Binder底层是AIDL实现的，还是AIDL底层是Binder实现的。
  * Binder是如何实现进程间通讯的。

* 三个APP，都可以收到服务器push的一条消息，收到后都可以通过语音的形式播出来，现在的需求是，如果有一个APP收到push消息，播放音频后，其他两个APP就不要再播放了。（我回答是AIDL去实现）。能否再细化下，AIDL怎么做呢？（我思考了一段时间）。你有没有实际的AIDL开发经验。

* Application、Service、Activity三个和Context的关系。这三个在生命周期上有什么不一样。

* Service的启动方式，有什么区别。

* Activity、Window、View有什么关系。

* setContentView()之后做了什么，怎么看到屏幕上的View。

* View、SurfaceView、TextureView在绘制的时候有什么差异。

* Activity的点击事件怎么分发的。

* RelativeLayout有两个Button，两个Button的大小和位置一样，收到点击事件，如何处理。

  * 如果给RelativeLayout也设置了onClick时间，将会如何消费事件。
  * Button设置了onTouchListener、onLongClickListener、onClickListener，这三个的优先级顺序。

* 性能优化

* 如果发现一个APP的cpu比较高，如何排查。

* 让你从0开始设计一个app，你会怎么做。

* weex和rn混合开发做过吗。你对rn了解多少？rn的原理是什么？JS方面的开发做过没。

* JNI的开发做过没。

* 有没有做过进程保活。

* 你工作以来遇到的最深刻的技术难题，如何解决的。

***

### 白龙马云行科技二面

* 讲一下你感觉有成就感的、技术挑战比较高的应用。有没有遇到什么技术难点。

* Activity的Window和Window悬浮窗区别。

* PhoneWindow、自己做的Window、通知栏的window之间有什么关系，怎么显示出来的。（回答优先级）

* 悬浮窗和进程保活的关系

* Window、View、SurfaceFlinger的关系。

* Android黄油计划、Vsync的讲一下。

* Vsync对于卡顿的帮助在哪里。（面试官提示从Vsync机制考虑）

* 为什么要16ms，Vsync这样做的原因是什么。（面试官提示结合cpu和gpu的关系）

  面试官提示：vsync主要是协调cpu和gpu，一个是gpu的绘制时间限制，防止过度的指令集堆积起来无法处理；一个是cpu处理发给gpu指令的那个限制。这两个之间应该有一个平衡。

* 性能优化：给你一个app，用户反馈，卡顿，启动慢，内存消耗多，容易被杀死，能不能讲一个通盘的处理方式，不是只限于这一个应用。

  * 排查、定目标、实施

  * 定优化的目标，有没有一个衡量标准用来定义我们的目标，好给到客户经理。如何权衡，我们给到产品经理的优化范围，这个范围是根据什么原则确定的。（书的大小，设备的好坏，我们是否可以借助一些工具、手段来分析处问题的所在，哪些部分可以把它干掉）

  * 面试官思路：自己先摸底，对基准有所认识，双方有一个都认可的标砖线，标准包括了机型、场景、使用范围，

    * 基于设备：十年前的老手机肯定不合适，我们得有一个共识的范围，
    * 基于复杂度：找一些有代表的书，一本很大的书，一本很小的书
    * 基于常用：或者通过用户埋点，判断那本书比较畅销，用户用的最多的。

    首先先把基准定下来，就可以和产品经理在同一个维度说话了，其次再说优化空间，如果IO读取繁忙，是否可以通过部分读取进。

    想办法先出一些技术策略，然后再和产品说优化策略。

    基准先打通，方案再打通，之后才能提出更加可靠的目标方案。

* 插件化和热修复的区别和联系。

  * 插件化主要涉及到哪些技术。

  * 如何根据Activity的launchMode来保证我们的坑位不至于少？

    面试官思路：每个launchmode都占坑，启动的时候根据我们的需求来决定启动哪个占坑Activity。

* 缺点：

  * 深度，比如Vsync
  * 启动优化思路的缺点
  * 插件化设计的技术栈和选型可能欠缺点。

***

***

***

### 优贝在线

* 数组和链表的区别
  * 插入速度
  * 数组是如何插入，如果数组长度为10，第5个位置插入，如何插入，如果5的位置有值，如何插入。
  * 数组如果分配5个大小，数组应该多大？如果是int型？如果是对象型，一个对象占10个字节，应该是5个字节？
* ArrayList和LinkedList是线程安全的吗？有了解线程安全的数据结构吗？
  * CopyOnWriteArrayList是如何实现线程安全的。
  * 还了解concurrent包下面的其他数据结构吗？
* 讲一下HashMap原理。
  * 插入元素如何找到应该插入的位置？
  * 如何处理哈希冲突的？（我回答了开放地址法）HashMap用的不是开放地址法吧？
* volatile关键字
  * 什么是可见性？了解底层是怎么实现的吗？
  * 什么是有序性？
  * 什么是原子性？为什么会有原子性这个问题？
  * 能从Java调度方面讲一下原子性的问题吗？
  * 有几种方式可以保证原子性？
  * AtomicInteger内部如何实现原子性？
* CAS了解吗？
* Java内存模型
* 虚拟机栈存的是什么
* Java分派，为什么说Java是静态多分派，动态单分派？
* Java8了解吗？lambda表达式了解吗？
* 说一下Activity的生命周期？A启动B的过程的生命周期过程。onStop什么时候执行
* Handler机制
* Looper和线程的关系。
* 说一下ThreadLocal，它的key是什么？value是什么？
* 对设计模式有什么了解？装饰者模式了解吗？访问者模式了解吗？

***

***

***

### 2021年

****

### keep

1. 进程和线程的区别，为什么要定义这样的概念。
2. hash表是什么样的数据结构，如何避免哈希碰撞？
3. 软件oom如何来解决的？
4. LeakCanary的源码，如何判断Activity有没有被释放，实例有没有被销毁。
5. 对Android做过哪些兼容性的适配。
6. RelativeLayout和ContraintLayout
7. 启动时间优化有些操作拿到子线程，可以拿到子线程中做的还需要考虑些什么其他的。
8. 多线程在处理CPU密集型和IO密集型，有什么需要注意的。线程池来完成，任务有什么区别。有什么业务场景，有什么解决方案
9. 根据前序遍历和中序遍历，还原二叉树

***

***

***

### 货拉拉

1. framework主要做什么内容，android系统打包处理有了解过吗？开发出来之后怎么运行到设备上？fastboot的合入？其他代码的修改？
2. 介绍下jmm，一个方法的执行，伴随着内存中的哪些操作？栈帧中包含什么内容？栈帧会造成oom吗？方法区会造成oom吗？
3. JMM不同的模块，是以什么单位区分的？线程为单位还是进程为单位？
4. android开启一个空的进程，占用多少内存？
5. gc了解过吗，简单讲一下。eden和s1，s2的内存分配比例是多少？
6. 内存收集有哪些算法？新生代用的什么算法？老年代用的什么算法？
7. 新生代和老年代的比例是多少？（1：2）
8. java对应的四种引用类型，他们的区别是什么？弱引用在android中有哪些地方会使用？（我回答handler通过弱引用持有外部的activity）。handler为什么使用弱引用，而不使用软引用或者虚引用？虚引用有什么特点？
9. 泛型在什么场景下使用？可以用在类上吗？可以用在方法上吗？可以用在变量上吗？
10. 泛型的上下通界符，上通界符super有什么特点？
11. 内部类有哪几种类型？他们的特点和使用场景？静态内部类为什么可以解决内存泄露的问题？
12. 匿名内部类引用的局部变量为什么要定义成final。（内存中重新创造了一个对象，拷贝）
13. 讲讲java多线程（我讲到了三大特性）。volatile解决哪些问题？为什么可以解决？加锁可以解决哪些问题？加锁会造成死锁吗？
14. 线程通讯都有哪几种方式？（我回答handler、handlerthread；wait，notify）
15. 讲讲生产者消费者模型？模型的核心是什么？（我回答是wait和notify。面试官觉得是存放数组的list，list提供了数据缓冲区）
16. 讲讲handler。post、send、obtain，最终调用哪个方法？了解消息屏障吗？消息屏障解决了什么问题？
17. recyclerview有几级缓存？RecyclerPool了解过吗？
18. 聊一下LruCache。（LinkedHashMap等）
19. 聊一下动画的实现？补间动画view移动后，点击哪里可以触发点击事件。源码是如何实现这种效果的？了解Matrix
20. 两个app，同一个包名，可以安装在一个手机上吗？或者说，怎么安装到手机上？（主要问安装app的一些限制）app如何实现双开？（面试官讲到了packid和packname）
21. 代码如何变成apk的？即android的编译过程。res打包文件通过哪个工具做的（aapt）？打包apk是通过什么工具做的（apkbuilder）？打包dex为什么要分包？为什么会有65535限制？63356除了针对方法数量，还用于其他限制吗（方法名，变量名等）？
22. 二叉树查找有哪几种方式？（我回答bfs和dfs）（面试官说是循环和迭代）。迭代会造成oom吗？
23. python的元祖是用什么符号去做的？
24. scrapy爬虫脚本的模块有哪些知道吗？有遇到过反扒测试吗？异步加载什么解决？
25. 有做过ndk方向的so开发吗？

***

### 立达智胜

1. 对handler的理解？MessageQueue的数据结构是什么？handler添加一个消息，是什么时候将消息添加到队列的？
2. post一个200ms的消息，然后post一个100ms的消息，是怎么插入的？如何插入到队列的？（面试官说MessageQueue是一个单链表的结构）。
3. loop执行循环，next取到消息之后，怎么处理？dispatchMessage有几次判断
4. Message消息分为几种，同步消息和异步消息的区别，异步消息在什么线程处理？
5. 你项目中的自定义view重写了哪些方法
6. 动画的分类，属性动画的插值器和估值器是什么配合工作的
7. mvp的优缺点，和mvc的差别，mvp和哪一层和哪一层解耦？mvp的缺点，有没有遇到内存泄露。
8. 现在什么些布局？相对布局还是约束布局？如何实现两个控件并排摆放，三个间距相等？

***

***

***

### ps：电话直接面试，未听清什么企业

1. 讲讲多线程
2. synchronized和lock的区别
3. volatile如何实现可见性
4. atomic原子类内部是如何实现的
5. 悲观锁和乐观锁的区别，以及哪些代表悲观锁和乐观锁？锁自旋
6. spingboot mvc模式
7. 事件分发
8. 如何实现首页引导蒙层，如何实现蒙层特殊位置点击。

***

***

***

### 优贝在线笔试

1. 如何获取view的宽高，和动态修改view的宽高
2. 匿名内部类可以extends或者implement一个接口吗？
3. class<T> 类中实现一个方法返回T的真实类型
4. MVP和MVC的区别，已经MVP的优点
5. 将二维数组顺时针旋转90度
6. 随机生成1-100的整数，并且不重复。

***

### 优贝在线一面

1. handler的实现原理，异步消息了解吗？异步消息和ui刷新有关系。
2. invalidate多次调用会有问题吗？多次调用会绘制多次吗？
3. activity的onresume方法拿view的宽高拿不到，是为什么？如何在onresume中获取view宽高？（我回答setMeasure，以及设置Observer监听）（面试官讲到post(Runnable)，原理是什么？）
4. 性能优化做过卡顿的优化、卡顿的收集。（我说做过启动优化，面试官接着问启动优化）
5. Binder的实现原理，方法调用是在主线程还是子线程？
6. 内存优化有做过吗？（我回答做过内存泄露）
7. 代理模式。静态代理和动态代理的区别？
8. 装饰者模式
9. 设计模式有特别熟悉的吗？
10. 单例什么实现？dcl为什么要两次判空？volatile关键字有什么作用？
11. builder模式的优势？
12. 线程池的实现原理？
13. volatile可以解决i++操作的线程安全吗？想实现i++的线程安全怎么操作？CAS的原理，对象的属性操作怎么实现原子性？（我回答变量拼接）（面试官说有AtomicReference）
14. 引用类型。weakreference有用到吗？图片缓存为什么用软引用？软引用会导致oom吗？
15. hashmap的结构和原理？1.8变成红黑树的原理
16. currenthashmap的原理？（面试官说老版本是分段锁，新版本不是了）

### 优贝在线二面

1. 全链路日志怎么做的？日志在内存中写入到文件之前，进程杀死，怎么保存？如何防止进程意外停止场景下的日志丢失？
2. 如何检测线上的内存泄露监控？有没有测试阶段监测内存泄露？（我回答自动化测试模拟重复点击，监测内存增长，捞取内存文件，mat分析）。四种引用类型，虚引用是干什么的？有一个引用队列是干什么用的？从引用队列角度来讲，有办法做内存检测的sdk吗？
3. websocket协议是什么样的？有监控连接成功率吗？
4. synchronized是可重入锁吗？可重入指什么意思？还有其他加锁方式吗？（我回答lock）面试官追问lock是接口，具体实现是什么？（我回答ReentrantLock），面试官问除了ReentrantLock还用过其他的吗？其他的加锁方式api还有哪些？
5. volatile是干什么用的？可见性是什么意思？除了volatile还有其他实现可见性的方式吗？（我回答加锁，final），面试官追问还有其他的吗？
6. 如何用不加锁的方式实现单例？（我回答静态单例）。面试官问如果不加锁，实现懒加载的单例？（我回答静态单例也是懒加载）。静态单例为什么是线程安全的？为什么静态单例没有内存可见性问题？cinit类构造函数底层的加锁怎么实现？
7. handler内部是如何解决内存可见性的问题的？
8. 线程池内部如何解决内存可见性的问题的？有没有自己封装过线程池？
9. 如何实现一个无锁队列？
10. java8 接口可以有默认实现，是如何解决多继承问题的？Java8为什么要添加接口默认实现功能？android中可以使用接口默认实现的多继承吗？
11. kotlin了解吗？
12. hashmap的查找时间复杂度是多少？hash冲突了呢？ArrayMap的查找时间复杂度是多少？什么时候应该用Hashmap，什么时候应该用ArrayMap？
13. 拓扑排序是用来解决什么问题的？
14. 如何用非递归的方式给二叉树做中序遍历？
15. 访问者模式是用来解决什么问题的？java是单分派还是双分派的语言？（面试官说java是单分派，如果你了解单分派和双分派是什么意思，可能就知道访问者模式是来解决什么问题了）
16. 桥接者模式？android哪些地方用到了桥接者模式？
17. 工厂模式分为抽象工厂、简单工厂、工厂方法，这三个有什么区别？
18. aidl实现进程间通讯，数据量大小有限制吗？
19. recylerview有几层缓存？我们可以自定义缓存吗？
20. http2.0的多路复用和http1.1的keepalive链接保持有什么区别？

***

***

***

### 青子未来笔试

1. 有一个数组ROOT[n]，数组的元素类型为Node，每个Node包含一个字段index，用来表示自己所在的ROOT位置标号，包含一个字段next，用来表示自己引用的下一级Node。Next可能指向自身，也可能指向一个新的孤立的Node（并非ROOT中的Node），也可能指向其他ROOT里的Node，这样每个ROOT下面都可能形成一个单向的Node分支链表，并且可能行程循环链表。请实现代码删除ROOT中所有下级的Node没有被其他ROOT下的Node引用的节点（可以用ROOT[n] = null设置为删除）

2. 假设一个函数 bool testAndSet(int value, int target, int before)（不需要自己实现）可以线程安全的比较value值是否为before，如果是的话就设置为target，同时返回true，否则不设置值并且返回false。请基于此函数实现一个长度不超过100的线程安全的Queue（包含pop和push，不能使用synchronized/lock/mutex/atomic等关键字/类，可以使用volatile）

3. 函数A会返回范围在1 - INT_MAX的单个数字，返回的数字会大致随着调用次数的增加增大，不会重复返回相同的数字，虽然返回值不断增大，但是两次调用之间的返回值并不严格保证递增的顺序，会有一定概率变小，比如正常为1，2，3，4，5，6，7，8，9这样返回，但是也可能1，2，3，5，7，6，4，8，9这样返回。下一个函数B，里面持续接受函数A的返回值，当接受到数字后，严格按顺序打印出未打印过的最小值。比如收到1，2，5，6，4，8后，应该打印1，2，当后面收到3后，打印3，4，5，6，然后再收到7hi欧，打印7，8，总是打印最小的值

4. 一个数组，里面全是数组，从左到右的特征是：从小到大，然后从大到小，数组中可能出现连续重复的数组，请写一段代码最快找出数组中最大的值（可能为1到多个）

   比如数组[1,3,3,3,4,5,6,7,8,8,8,8,8,9,10,10,11,11,12,23,33,33,10,2,2,2,2,2,2,1,1]

5. 有一个由0-9组成的十进制的数组，例如：28373288128383，请写一段代码实现从数组转换成A-Za-Z 52个字表达的52进制的字符串，其中A到Z分别表示0-25，a到z分别表示26到51

6. 讲一讲view事件的原理（回答vsync信号的机制）

***

***

***

### 去哪儿

1. 单例模式为什么要用volatile关键字？
2. 代理模式项目开发中有用过吗？
3. 事件分发的流程。子view消费了down事件后，后续的事件也会传递给它，底层是如何实现的？
4. view是一个disbale的状态，它可以消费事件吗？
5. ontouchlistener和onclick的优先级
6. invalidate和postinvalidate的区别
7. 点击事件如何传递到activity上的
8. 性能优化做过哪些？
9. Glide了解过吗？
10. java集合。有了解过android特有的集合？
11. hashmap
12. 讲一下线程池。常见的线程池有哪些？
13. 两个栈实现一个队列

***

***

***

### 融云

1. 用过什么设计模式？
2. 手写双重检测单例。两层判空的含义？第二层判空不要行不行？synchronized可以保证几个特性？是否可以解决有序性？为什么可以解决有序性，还需要加volatile？（synchronized可以保证在单线程下不管怎么执行，执行结果是正常）不用volatile会有什么问题？
3. java1.6 synchronized锁升级的过程？无锁->偏向锁->轻量级锁->重量级锁
4. synchronized可以在几个地方使用？静态方法、普通方法、代码块，这三个地方使用有什么区别？（面试官说功能上来看代码块更灵活，底层字节码来看，同步方式是ACC_SYNCHRONIZED，同步代码块是用monitor）
5. 如何知道哪个线程可以重入到锁代码块内？（我回答对象头）类锁，没有对象的概念，锁存在哪里？
6. FrameLayout包含了一个Button，两者都实现了onclick监听。场景1，button按下，滑动到buttong外围，up；场景2，button按下，滑动到button外围，再滑动回button，up。上述两个场景，谁来消费onclick事件。（答案是都不执行，down消费后，设置标识位true，move到外围之后，标识位设为false，即使我再次滑动回来，标识位也不会设置为true，所以只要除了button，标识位就是false，则不会触发。实际应用场景，支付点击确定，滑动到外围，就不会执行支付步骤）
7. jni开发做过什么？aidl的oneway关键字是用来干什么的？参数上in、out有什么作用？binder用的多不多？
8. 如何处理内存泄露？LeakCanary的原理？LeakCanary能不能在线上使用？会有什么问题？（ondestory的会gc两次，gc会把线程停掉；dump内存是，也需要把其他线程停掉）。如何线上监测内存泄露？（我回答线上监测内存使用率）。如何解决dump内存的性能开销？如何解决线上dump内存造成的卡顿？线上dump的内存大小取决于对象的数量，一般有300-400M，如何过滤内存的信息，哪些可以裁剪掉？
9. 什么情况下会发生oom？除了堆内存不足，有没有其他情况也会发生oom？（我回答了除了程序计数器之外都会，面试官补充了线程数超上限、fd超上限）。方法区的大小是由什么决定的？jvm分为哪几个区？jdk8方法区变为元数据区，有什么影响吗？
10. 做过编译期插桩吗？asm等框架用过吗？Activity的插件化什么是样的原理？插件化占坑activity和targetactivity更换前后的hook点有哪些？Hook点的选择有什么规律？如果有多个hook点，如何选择？
11. Service如何实现插件化？BroadcastReceiver如何实现插件化？
12. 如何判断哪些Activity需要hook，哪些不需要？（我回答白名单。面试官说可以判断包名）
13. app是32位的，运行在一个32位的手机上，内存的限制在哪里？比如说发生内存泄露，限制的大小在哪里？
14. 了解过虚拟内存吗？虚拟内存是为了解决什么问题？32位的虚拟内存是多大？虚拟内存的分布知道吗？（面试官说虚拟内存内核占了1个G，其他的占了3个G。32位的app在32位的设备上运行，最大的限制不是在于内存，而是在于内存地址不够用，4个G的内存地址不够用，这是最大的瓶颈。16g的内存，总是app运行几百M就oom了，最大的问题是内存地址不够用，还没到拼内存的时候。如果是64位的操作系统+64G的内存，它的限制就在于物理内存是否够大）
15. 400M的高清大图，不压缩，如何展示，并且不让他发生oom？（面试官说图片分区域展示，移动加载多余的部分，android7不是放在java堆了，放到native层了）
16. im群，有一万个人，会遇到什么问题？怎么解决？（我回答服务端的压力很大）服务端有什么压力？（我回答保持一万个连接，防止断链，重连，以及及时性的问题）。微信假设每时每刻都有1000万人在线，那就是1000万个长连接，那不是压力更大吗？
17. 10000个人的群，支持已读回执，每个人都可以看到每条信息的已读回执。这种场景会有什么问题，怎么解决？
18. 10000个人的群，A用户是否记录其他9999个人的名字、头像等用户信息？B用户改了名字或者头像，怎么更新，合适更新？
19. A用户给B用户发送1G的文件，如何提升用户体验？
20. 中间人攻击的过程是什么？如何防止中间人攻击？中间人攻击一般出现在什么场景下，什么过程？
21. tls/ssl的握手过程。

***

***

***

### 一点资讯



***

***

***

### 天眼查



***

***

***

### 映客直播



***

***

***

