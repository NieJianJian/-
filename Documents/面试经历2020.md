## 美团

* 内部类的分类和使用场景

  * 为什么要有内部类，为了解决什么问题
  * 什么情况下使用内部类
  * 会带来哪些问题

* handler

  * 实现原理

  * 如何导致内存泄露

    [Handler内存泄露及解决方案](https://www.jianshu.com/p/804e774d9f76)

  * postdelay

* 内存泄露

  * 项目中导致内存泄露的点

* 线程

  * 为什么要有线程
  * 线程是不是越多越好
  * 线程之间的协作
    * 错误回答：使用标志位控制执行和暂停。（浪费资源）
  * 并发三大特性
    * float变量的操作是原子操作吗？

* synchronized和Lock的区别

* 静态单例

  * 注意volatile
  * 注意return

* service的启动方式和区别

* 如何实现AIDL

* 源码：okhttp和retrofit

***

***

***

## 58同城

* 面向接口和面向对象的区别
  * 单继承、多接口。接口可以多继承吗？
* HashMap
  * 负载因子
  * 扩容机制
  * 是否可以存入null，怎么存，存到哪里？
  * 头插法还是尾插法？
* HashTable
  * 和hashmap区别
  * 是否可以存null
* ConcurrentHashMap
  * 讲讲分段锁
* synchronized和volatile的区别
* ReentrantLock
  * 如何使用
  * 和sychronized的区别。
  * 会造成死锁吗
* Thread
  * 线程是什么
  * 死锁的条件
* ThreadLocal实现原理，和当前线程的关系
* JVM
  * 栈帧里面有什么
* JC ROOT
* 垃圾回收有哪几种
  * 对象可以直接进入老年代吗
* Handler
  - 100ms的消息发送，过了40ms，再发送一个延迟10ms的消息，这个消息插入到哪里。
* View绘制原理
* View事件分发
  * LinearLayout嵌套RelativeLayout，再嵌套TextView。点击TextView，一直滑动到LinearLayout外部，整个事件的处理是怎么样的。
  * down事件在哪个方法中。
* View滑动冲突
* 动画
  * 帧动画、补间动画、属性动画的概念和区别。是否View移动，点击原来的位置是否还能触发事件。
* RecyclerView和ListView的区别
* 内存优化
  * View优化，是不是层级越多，就一定会卡顿？为什么卡顿，为什么是16ms？
  * Bitmap的使用？（裁剪、缩略图）
* Glide的原理，缓存机制，生命周期。
* 设计模式的六大原则，了解什么设计模式。
* 代理模式是什么，动态代理怎么用。

***

***

***

### 硬核聚视

* 阅读过什么源码
* 手写责任链模式
* 四大组件
* Activity的启动模式
  * singleInstance为什么要起一个新栈，和旧栈之间的关系，多个栈的意义是什么
* Java多线程
  * AsyncTask必须重写的方法
* volatile
  * 如何保证可见性的，谁负责立即刷新到主内存的。
  * 什么是重排序，为什么要重排序，什么情况下会重排序
  * 如何实现禁止重排序的，谁来实现重排序的。
* 手写'单例模式
  * 变量为什么加volatile

* sychronized和Lock
  * 什么是可重入锁
  * 为什么要可重入
  * 底层如何实现加锁
* HTTP断点续传

***

### 硬核聚视二面

* 为什么选择Android行业
* 为什么要离职
* 有自己的目标吗，自己想学哪方面的东西。
* 项目的应用架构，当时是怎么安排app的架构。
  * Builder模式的优点，为什么不用构造方法传入或者set设置，为什么要用Builder模式。
* HttpUrlConnection写网络请求的时候需要处理哪些异常。
* finally之前调用return，还会不会执行finally。
* HTTPS请求的认证过程。客户端需要做什么事儿。
* HTTP 302是什么意思，重定向如何实现，如何知道重定向到哪里。
* int和Integer类型的区别。用的时候有什么需要注意的。
* minSdkVersion、compileSdkVersion、targetSdkVersion
* IntentService什么时候使用。代码里有用到过吗？
* fbreader开源库的选型，为什么选这个，出于什么考虑。接入过程中有没有遇到什么问题。
* 做过什么优化，优化后达到什么结果。
  * 启动慢，需要优化，任务分配给你，你会怎么做，做些什么。如何评估你的优化结果。
* 你应用在做过的比较好的功能，或者有技术难点功能。
* 给你一个任务，启动优化任务，看你怎么去做。缺少一个开始做规划的过程。比如项目从0-1的框架是如何搭建的，这个地方缺少一个大的方向上把控，清晰的划分为哪些东西。比如启动优化任务，第一我要查问题出在哪，要确定优化到什么地步，如何检测我们优化的结果。网络层的东西欠缺，HTTPS这个应该算是比较基础的知识点，应该扎实的掌握该知识。
* 后期的学习方向，技术的发展方向。有倾向于哪个方向发展吗？

***

***

***

### 掌心互联

* MVP
* 视频用的什么实现方式，surfaceView和mediaPlayer如何实现视频播放。
* SurfaceView和TextureView的区别
* Android启动模式
* 插件化，项目中有没有用到
* 热更新
* 阅读app翻页如何实现
* 蓝悦app渲染如何确定一页读取哪些内容，多少内容
* TextView的设置高度比实际宽度大，如何处理的。
* 有没有做过海外版的app，google服务，支付什么的。
* 公司情况：20多人。3个andorid，4个ios，2个后台，一个测试，2个UI。一个技术专家，一个技术总监。13薪，440餐补。项目奖金。公司模式是半个月一个月做一款app，尝试爆款。大小周，常加班。
* 人事问：为什么离职，工作中有没有特别有成就感的事儿。

***

***

***

### 小熊博望一面

* react native，flutter有了解吗

* 自定义View着重哪几个步骤，有什么需要注意的点。

  * wrap_content需要在onDraw中处理，否则和match_parent一直。
  * onDraw中写代码有什么需要注意的（我回答的是16ms，优化，尽量少创建对象）
  * 有涉及到自定义View的工作吗。
  * 继承于ViewGorup，比如继承于FrameLayout，在onDraw中绘制东西，有什么需要注意的吗？（没回答出来）
  * 那你知道View的ViewGroup的绘制有什么区别。（我回答的是ViewGroup需要不断的测量子View，View只需要测量自身，ps，有点跑题）
  * 比如说继承一个FrameLayout，在它的onDraw方法中打印一行log，这样log会打印出来吗？（没回答出来）
  * ViewGroup有一个方法叫setWillNotDraw，你回去可以看看，它会控制自己要不要绘制这个东西。（面试官的回答，这才是面试官问ViewGropu绘制的点）

* 事件分发流程，从哪接收到，怎么决定如何给谁处理。

* Java的锁熟悉吗。（回答sychronized和ReentrantLock）

  * 这两个锁有什么区别（回答自动加锁和手动加解锁）
  * synchronized中有一行代码崩溃和Lock中有一行代码崩溃，导致的结果有什么区别吗？（回答的是unlock应该在finally中）
  * 为什么确保unlock一定要执行。（回答一一对应，否则会造成死锁）
  * 那为什么synchronized不需要处理呢？（回答是系统底层，monitor）

* 手写单例模式

  * 为什么加volatile
  * 两次判空是什么意思，为什么要两次判空。

* Java接口和抽象类的区别

* 接口可以被继承吗

* 性能优化从哪几个点找问题，解决问题。

* LinearLayout中嵌套了LinearLayout会有什么坑吗？（我反问，为什么不能用merge合并）

  * 如果LinearLayout中又写了一个LinearLayout，同时两个都写layout_weight，可能会造成什么问题吗？
  * LinearLayout的测量流程是什么样的，碰到layout_weight测量流程会变成什么样子。

* 为什么是内存泄露，比较容易出现的内存泄露有哪些。（回答static，内部类）

* 内部类为什么会导致内存泄露

* 屏幕适配，权限申请。屏幕适配有什么心得吗？如何确保，或者说用什么手段确保效果。

* 竖屏和横屏如何适配。横屏的布局和竖屏的布局不一样，如何实现。

* 什么情况会造成ANR？

* Service代码跑在主线程还是子线程？

* 进程如何监测到是否ANR？

* Handler机制？

* 如何在每一条消息完成去打印一条log，如何实现？

* File类熟悉吗？File是树状结构，如何遍历？

  ```java
  public class Tree{
      List<Tree> children;
  }
  ```

  （我用递归实现的），然后面试官问，如果用递归的话，层级特别深，会有什么问题？

  （我回答栈溢出），然后面试官问，还有什么好的方法可以实现？（我回答不用递归就是迭代）

  （BFS采用Queue，DFS采用Stack）

***

### 小熊博望二面

* 你负责哪个模块，你做的工作是什么。介绍最近的项目就行。

* 阅读器的实现是自己写的，还是开源的项目修改。txt文本阅读实现的方案和流程，设计到的技术点。

  * （我回答到文件加密）文本是整体加密还是内容加密？
  * 如果文本特别大呢？（我回答txt文本不会很大）为什么不会很大呢？你们做过边缘测试吗？你有没有考虑边界条件？你们需求有没有明确要求文本多大？你处理最大的文本多大？
  * （我回答不会每次全部读取，只读取4096），4096有几个字？你只读部分，不可能解密的啊？
  * （我回答解密就是去文本全部解密，读取才是一部分的去读。PS：这一块没回答好）
  * 耗时你们考虑了吗？什么加密方式。（我回答md5加密）。md5是可逆的吗？
  * （解密放在data目录下）会不会有什么策略？每次加载都放进去？有100本怎么办？
  * （读取字节，用Canvas一行一行画）文字是TextView？排版怎么解决？（我回答的排版是一行多少个字怎么控制）面试官问的排版是中英文混合如何处理？两遍无法对齐，如何解决？

* 最近做的项目中所用到的模块和技术的难点？技术方案的选择。

* 公共代码库的开发和维护，你的屏幕自适配是怎么做的呢？

* 如果说让你在手机上做适配，你怎么做呢？你知道今日头条的自适配吗？（我回答我在它的基础上做了修改）。你做了哪些修改？我其实想听的是，宽度有一个比例，高度有一个比例，进行适配的。

* 你说下你权限申请的技术思路，技术方案，怎么考虑的？遇到的问题，和怎么解决的。你的框架怎么搭建的？用什么设计模式了吗？怎么让别人用起来更加方便。

* 公共组件开发是指哪些东西？

* 算法题：n级台阶，每次走1步或者2步，请问有多少种方案？（PS：动态规划）

  * 动态规划解决问题的本质是什么？

* 算法题：有序数组，如何变成锯齿数组（锯齿数组：偶数位比两边的奇数位都要大），元素重复不考虑。

  我的解题方案：将偶数位和它后面的那一位进行位置调换。

* 增量更新是指热更新吗？用到的关键技术有哪些？如何对保的字节位进行比较的？

  * 有Bug，dex如何和线上进行区分的，如何替换的。如何合并，字节位如何判断。（面试官想问的比较字节位的过程）

* 有做过主题切换的功能？（我会带没做过）你知道换肤是如何实现的吗？

  * Resources如何创建的，皮肤包是什么类型的？是安装包还是apk的，你都没说前提。

* 你知道LayoutFactory？LayoutInflater.Factory的夜间模式。

* 你平时如何提升自己的技术？

* 匿名内部类为什么final修饰？值拷贝，不是变量引用，涉及到JVM内存方面的知识。

* 线程池几个关键的参数是什么，分别代表什么意思。

* 线程中断如何实现。

***

***

***

### 白龙马云行科技一面

* 封装、继承、多态

* 基本数据类型和包装数据类型的区别

* 有没有C++经验

* C++是多继承，为什么Java是单继承

* 抽象类和接口的区别？抽象类和接口可以定义final修饰的方法吗？常量能用final修饰吗？为什么？

* String类为什么是final的。

  * ```java
    String a = "helloworld";   
    String b = "hello" + "world"；
    String c = new String("helloworld")；
    ```

    * a是否等于b
    * a是否等于c
    * `String c = new String("helloworld")`产生几个对象。

* HashMap的实现原理？如何扩容？HashMap是线程安全的吗？它哪块实现导致它不是线程安全的？

* 线程与进程的区别。

* Java线程同步方式。

* Android线程间交互方式。

* Handler的原理

* 子线程new一个handler和主线程new一个handler有什么不一样

* 系统如何知道looper是在主线程还是子线程，是如何判断的。

* 进程间通讯的方式

  * Binder底层是AIDL实现的，还是AIDL底层是Binder实现的。
  * Binder是如何实现进程间通讯的。

* 三个APP，都可以收到服务器push的一条消息，收到后都可以通过语音的形式播出来，现在的需求是，如果有一个APP收到push消息，播放音频后，其他两个APP就不要再播放了。（我回答是AIDL去实现）。能否再细化下，AIDL怎么做呢？（我思考了一段时间）。你有没有实际的AIDL开发经验。

* Application、Service、Activity三个和Context的关系。这三个在生命周期上有什么不一样。

* Service的启动方式，有什么区别。

* Activity、Window、View有什么关系。

* setContentView()之后做了什么，怎么看到屏幕上的View。

* View、SurfaceView、TextureView在绘制的时候有什么差异。

* Activity的点击事件怎么分发的。

* RelativeLayout有两个Button，两个Button的大小和位置一样，收到点击事件，如何处理。

  * 如果给RelativeLayout也设置了onClick时间，将会如何消费事件。
  * Button设置了onTouchListener、onLongClickListener、onClickListener，这三个的优先级顺序。

* 性能优化

* 如果发现一个APP的cpu比较高，如何排查。

* 让你从0开始设计一个app，你会怎么做。

* weex和rn混合开发做过吗。你对rn了解多少？rn的原理是什么？JS方面的开发做过没。

* JNI的开发做过没。

* 有没有做过进程保活。

* 你工作以来遇到的最深刻的技术难题，如何解决的。

***

### 白龙马云行科技二面

* 讲一下你感觉有成就感的、技术挑战比较高的应用。有没有遇到什么技术难点。

* Activity的Window和Window悬浮窗区别。

* PhoneWindow、自己做的Window、通知栏的window之间有什么关系，怎么显示出来的。（回答优先级）

* 悬浮窗和进程保活的关系

* Window、View、SurfaceFlinger的关系。

* Android黄油计划、Vsync的讲一下。

* Vsync对于卡顿的帮助在哪里。（面试官提示从Vsync机制考虑）

* 为什么要16ms，Vsync这样做的原因是什么。（面试官提示结合cpu和gpu的关系）

  面试官提示：vsync主要是协调cpu和gpu，一个是gpu的绘制时间限制，防止过度的指令集堆积起来无法处理；一个是cpu处理发给gpu指令的那个限制。这两个之间应该有一个平衡。

* 性能优化：给你一个app，用户反馈，卡顿，启动慢，内存消耗多，容易被杀死，能不能讲一个通盘的处理方式，不是只限于这一个应用。

  * 排查、定目标、实施

  * 定优化的目标，有没有一个衡量标准用来定义我们的目标，好给到客户经理。如何权衡，我们给到产品经理的优化范围，这个范围是根据什么原则确定的。（书的大小，设备的好坏，我们是否可以借助一些工具、手段来分析处问题的所在，哪些部分可以把它干掉）

  * 面试官思路：自己先摸底，对基准有所认识，双方有一个都认可的标砖线，标准包括了机型、场景、使用范围，

    * 基于设备：十年前的老手机肯定不合适，我们得有一个共识的范围，
    * 基于复杂度：找一些有代表的书，一本很大的书，一本很小的书
    * 基于常用：或者通过用户埋点，判断那本书比较畅销，用户用的最多的。

    首先先把基准定下来，就可以和产品经理在同一个维度说话了，其次再说优化空间，如果IO读取繁忙，是否可以通过部分读取进。

    想办法先出一些技术策略，然后再和产品说优化策略。

    基准先打通，方案再打通，之后才能提出更加可靠的目标方案。

* 插件化和热修复的区别和联系。

  * 插件化主要涉及到哪些技术。

  * 如何根据Activity的launchMode来保证我们的坑位不至于少？

    面试官思路：每个launchmode都占坑，启动的时候根据我们的需求来决定启动哪个占坑Activity。

* 缺点：

  * 深度，比如Vsync
  * 启动优化思路的缺点
  * 插件化设计的技术栈和选型可能欠缺点。

***

***

***

### 优贝在线

* 数组和链表的区别
  * 插入速度
  * 数组是如何插入，如果数组长度为10，第5个位置插入，如何插入，如果5的位置有值，如何插入。
  * 数组如果分配5个大小，数组应该多大？如果是int型？如果是对象型，一个对象占10个字节，应该是5个字节？
* ArrayList和LinkedList是线程安全的吗？有了解线程安全的数据结构吗？
  * CopyOnWriteArrayList是如何实现线程安全的。
  * 还了解concurrent包下面的其他数据结构吗？
* 讲一下HashMap原理。
  * 插入元素如何找到应该插入的位置？
  * 如何处理哈希冲突的？（我回答了开放地址法）HashMap用的不是开放地址法吧？
* volatile关键字
  * 什么是可见性？了解底层是怎么实现的吗？
  * 什么是有序性？
  * 什么是原子性？为什么会有原子性这个问题？
  * 能从Java调度方面讲一下原子性的问题吗？
  * 有几种方式可以保证原子性？
  * AtomicInteger内部如何实现原子性？
* CAS了解吗？
* Java内存模型
* 虚拟机栈存的是什么
* Java分派，为什么说Java是静态多分派，动态单分派？
* Java8了解吗？lambda表达式了解吗？
* 说一下Activity的生命周期？A启动B的过程的生命周期过程。onStop什么时候执行
* Handler机制
* Looper和线程的关系。
* 说一下ThreadLocal，它的key是什么？value是什么？
* 对设计模式有什么了解？装饰者模式了解吗？访问者模式了解吗？

***

***

***

